{% extends 'base.html.twig' %}

{% block title %}Hello CategoriesController!{% endblock %}

{% block body %}

<div class="container mt-5">
    <h1>{{ controller_name }} {{categories.name}}! ✅</h1>

    <div class="w-75 row my-5 justify-content-between">
        {% for product in products %}
        <div class="card col-5 p-0">
            <div class="card-header">{{product.name}}</div>
            <div class="card-body">{{product.description}}</div>
            <div class="card-footer">
                <a href="" class="btn btn-info">Détails</a>
            </div>
        </div>
        {% endfor %}

        {# on passe aux produits des catégories enfant liées s'il y en a #}
        {% for category in allCategories %}
        {# s'il existe une catégorie parent et que celle-ci est identique à l'id retourné par le controlleur #}
        {% if category.parent is not same as null and category.parent.id == id %}

        <h2 class="my-3 h5">{{category.name}}</h2>


        {% for products in category.products %}
        <div class="card col-5 p-0 mb-3">
            <div class="card-header">
                {{products.name}}
            </div>
            <div class="card-body">
                {{products.description}}
            </div>
            <div class="card-footer">
                <a href="" class="btn btn-info">Détails</a>
            </div>
        </div>
        {% endfor %}


        {% endif %}

        {% endfor %}
    </div>


</div>
{% endblock %}